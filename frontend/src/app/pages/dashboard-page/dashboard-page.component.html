<section class="profile mt-5 mr-5 ml-5 g-5 p-5 pb-0 d-flex flex-row" *ngIf="(auth$ | async) as authState">
    <div class="profile-icon-wrapper d-flex flex-column">
        <mat-icon fontIcon="person"></mat-icon>
    </div>
    <div class="profile-detail d-flex flex-column">
        <span class="mat-headline mb-2">{{authState.user?.first_name+' '+authState.user?.last_name}}
            <button color="primary" class="edit" mat-icon-button (click)="onEditProfile()">
                <mat-icon fontIcon="edit" title="Modifier le profil"></mat-icon>
            </button>
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="tune"></mat-icon>
            {{(authState.user?.is_entity_staff)?'Gestionaire':'Collaborateur'}}</span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="mail"></mat-icon>
            {{authState.user?.email}}
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="phone"></mat-icon>
            {{authState.user?.phone}}
        </span>
    </div>
    <div class="entity-detail d-flex flex-column">
        <span class="mat-headline mb-2">{{authState.user?.entity?.name}}</span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1" *ngIf="authState.user?.entity?.kind==2">
            <mat-icon fontIcon="tune"></mat-icon>
            Ecole
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1" *ngIf="authState.user?.entity?.kind==3">
            <mat-icon fontIcon="tune"></mat-icon>
            Entreprise
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="info"></mat-icon>
            {{authState.user?.entity?.activity}}
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="mail"></mat-icon>
            {{authState.user?.entity?.email}}
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="phone"></mat-icon>
            {{authState.user?.entity?.phone}}
        </span>
        <span class="g-2 d-flex align-items-center mat-subheading-2 mb-1">
            <mat-icon fontIcon="location_on"></mat-icon>
            {{authState.user?.entity?.address+', '+authState.user?.entity?.zip_code+' '+authState.user?.entity?.city}}
        </span>
    </div>
</section>
<section class="projects ml-5 mr-5 mb-5 p-5 d-flex flex-column">
    <div class="d-flex flex-row g-3">
        <button mat-flat-button color="accent">Mes projets</button>
        <button mat-flat-button class="color-accent" disabled>Mon historique</button>
        <div class="flex-spacer"></div>
        <button *ngIf="(auth$ | async)?.user?.entity?.kind === 3" mat-flat-button color="primary"
            (click)="onCreateNewProject()">
            <mat-icon fontIcon="add"></mat-icon>
            Nouveau projet
        </button>
        <button *ngIf="(auth$ | async)?.user?.entity?.kind === 3" mat-flat-button color="primary"
            (click)="onManageAccess()" [matBadge]="countAccessRequest" matBadgeColor="warn"
            matTooltip="Gestion des accès" matBadgeSize="medium" matBadgeOverlap="true"
            [matBadgeHidden]="(countAccessRequest <1)?true:false">
            <mat-icon fontIcon="manage_accounts"></mat-icon>
            Accès
        </button>
    </div>
    <mat-divider></mat-divider>
    <div class=" project-search-wrapper pt-5 d-flex flex-row g-5">
        <app-project-card *ngFor=" let project of projects">
            <!-- [title]="project.name"
            [subTitle]="projectKindToString(project.kind)" [projectId]="project.pk" [content]="project.description"
            [deadline]="project.deadline" buttonIcon="arrow_forward" (actionEvent)="onOpenProject($event)" -->
        </app-project-card>
        <!-- https://v14.material.angular.io/components/chips/examples -->
    </div>
</section>